(function(p,n){var g=[];init=function(){n("html").hasClass("han-la")&&n("body").each(function(){var m=unicode_set("hanzi"),l=unicode_set("latin")+"|"+g.punc[0],a=g.punc;patterns=["/("+m+")("+l+"|"+a[1]+")/ig","/("+l+"|"+a[2]+")("+m+")/ig"];patterns.forEach(function(a){findAndReplaceDOMText(this,{find:eval(a),replace:"$1<hanla>$2"})},this);findAndReplaceDOMText(this,{find:"<hanla>",replace:function(){return document.createElement("hanla")}});this.normalize();n("* > hanla:first-child").parent().each(function(){1==
this.firstChild.nodeType&&(n(this).before(n("<hanla/>")),n(this).find("hanla:first-child").remove())})})};unicode_set=function(m){return m.match(/[hanzi|latin]/)?g[m].join("|"):g[m]};findAndReplaceDOMText=function(g,l){l.filterElements=function(a){var d=a.nodeName.toLowerCase();a=(a=1==a.nodeType?a.getAttribute("class"):"")&&null!=a.match(/han-js-charized/)?!0:!1;return"style"!==d&&"script"!==d&&!a};return p.findAndReplaceDOMText(g,l)};g.latin=["[A-Za-z0-9\u00c0-\u00ff\u0100-\u017f\u0180-\u024f\u1e00-\u1eff]"];
g.punc=["[@&=_,.?!$%^*-+/]","[(\\['\"<\u2018\u201c]","[)\\]'\">\u201d\u2019]"];g.hanzi="[\u4e00-\u9fff] [\u3400-\u4db5\u9fa6-\u9fbb\ufa70-\ufad9\u9fbc-\u9fc3\u3007\u3040-\u309e\u30a1-\u30fa\u30fd\u30fe\ufa0e-\ufa0f\ufa11\ufa13-\ufa14\ufa1f\ufa21\ufa23-\ufa24\ufa27-\ufa29] [\ud840-\ud868][\udc00-\udfff]|\ud869[\udc00-\udedf] \ud86d[\udc00-\udf3f]|[\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udf00-\udfff] \ud86d[\udf40-\udfff]|\ud86e[\udc00-\udc1f] [\u31c0-\u31e3]".split(" ");g.biaodian=["[\u00b7\u30fb\ufe30\u3001\uff0c\u3002\uff1a\uff1b\uff1f\uff01\u2014\u30fc\u22ef\u2026\uff0e\u00b7\uff0f]",
"[\u300c\u300e\uff08\u3014\u3010\u300a\u3008\u201c\u2018]","[\u300d\u300f\uff09\u3015\u3011\u300b\u3009\u2019\u201d]"];g.zhuyin=[];g.zhuyin[0]="[\u3105-\u312d\u31a0-\u31ba]";g.zhuyin.shengmu="[\u3105-\u3119\u312a-\u312c\u31a0-\u31a3]";g.zhuyin.jieyin="[\u3127-\u3129]";g.zhuyin.yunmu="[\u311a-\u3126\u312d\u31a4-\u31b3\u31b8-\u31ba]";g.zhuyin.yunjiao="[\u31b4-\u31b7]";g.zhuyin.diao="[\u02d9\u02ca\u02c5\u02c7\u02cb\u02ea\u02eb]";n(document).on("ready",function(){init()})})(window,window.jQuery,void 0);
window.findAndReplaceDOMText=function(){function p(){return n.apply(null,arguments)||g.apply(null,arguments)}function n(a,d,f,e,b){if(d&&!d.nodeType&&2>=arguments.length)return!1;var q="function"==typeof f;q&&(f=function(a){return function(b,c){return a(b.text,c.startIndex)}}(f));var c=g(d,{find:a,wrap:q?null:f,replace:q?f:"$"+(e||"&"),prepMatch:function(a,b){if(!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(0<e){var c=a[e];a.index+=a[0].indexOf(c);a[0]=c}a.endIndex=a.index+
a[0].length;a.startIndex=a.index;a.index=b;return a},filterElements:b});p.revert=function(){return c.revert()};return!0}function g(a,d){return new m(a,d)}function m(a,d){d.portionMode=d.portionMode||"retain";this.node=a;this.options=d;this.prepMatch=d.prepMatch||this.prepMatch;this.reverts=[];this.matches=this.search();this.matches.length&&this.processMatches()}var l=document;p.Finder=m;m.prototype={search:function(){var a,d=0,f=this.options.find,e=this.getAggregateText(),b=[],f="string"===typeof f?
RegExp(String(f).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"):f;if(f.global)for(;a=f.exec(e);)b.push(this.prepMatch(a,d++));else(a=e.match(f))&&b.push(this.prepMatch(a,0));return b},prepMatch:function(a,d){if(!a[0])throw Error("findAndReplaceDOMText cannot handle zero-length matches");a.endIndex=a.index+a[0].length;a.startIndex=a.index;a.index=d;return a},getAggregateText:function(){function a(f){if(3===f.nodeType)return f.data;if(d&&!d(f))return"";var e="";if(f=f.firstChild){do e+=a(f);while(f=
f.nextSibling)}return e}var d=this.options.filterElements;return a(this.node)},processMatches:function(){var a=this.matches,d=this.node,f=this.options.filterElements,e,b,q=[],c=d,h=a.shift(),k=0,g=0,l=0,m;a:for(;;){3===c.nodeType&&(!b&&c.length+k>=h.endIndex?b={node:c,index:l++,text:c.data.substring(h.startIndex-k,h.endIndex-k),indexInMatch:k-h.startIndex,indexInNode:h.startIndex-k,endIndexInNode:h.endIndex-k,isEnd:!0}:e&&q.push({node:c,index:l++,text:c.data,indexInMatch:k-h.startIndex,indexInNode:0}),
!e&&c.length+k>h.startIndex&&(e={node:c,index:l++,indexInMatch:0,indexInNode:h.startIndex-k,endIndexInNode:h.endIndex-k,text:c.data.substring(h.startIndex-k,h.endIndex-k)}),k+=c.data.length);m=1===c.nodeType&&f&&!f(c);if(e&&b){if(c=this.replaceMatch(h,e,q,b),k-=b.node.data.length-b.endIndexInNode,b=e=null,q=[],h=a.shift(),l=0,g++,!h)break}else if(!m&&(c.firstChild||c.nextSibling)){c=c.firstChild||c.nextSibling;continue}for(;;)if(c.nextSibling){c=c.nextSibling;break}else if(c.parentNode!==d)c=c.parentNode;
else break a}},revert:function(){for(var a=this.reverts.length;a--;)this.reverts[a]();this.reverts=[]},prepareReplacementString:function(a,d,f,e){e=this.options.portionMode;if("first"===e&&0<d.indexInMatch)return"";a=a.replace(/\$(\d+|&|`|')/g,function(a,d){var c;switch(d){case "&":c=f[0];break;case "`":c=f.input.substring(0,f.startIndex);break;case "'":c=f.input.substring(f.endIndex);break;default:c=f[+d]}return c});return"first"===e?a:d.isEnd?a.substring(d.indexInMatch):a.substring(d.indexInMatch,
d.indexInMatch+d.text.length)},getPortionReplacementNode:function(a,d,f){var e=this.options.replace||"$&",b=this.options.wrap;if(b&&b.nodeType){var g=l.createElement("div");g.innerHTML=b.outerHTML||(new XMLSerializer).serializeToString(b);b=g.firstChild}if("function"==typeof e)return(e=e(a,d,f))&&e.nodeType?e:l.createTextNode(String(e));b="string"==typeof b?l.createElement(b):b;e=l.createTextNode(this.prepareReplacementString(e,a,d,f));if(!b)return e;b.appendChild(e);return b},replaceMatch:function(a,
d,f,e){var b=d.node,g=e.node,c,h;if(b===g){0<d.indexInNode&&(c=l.createTextNode(b.data.substring(0,d.indexInNode)),b.parentNode.insertBefore(c,b));var k=this.getPortionReplacementNode(e,a);b.parentNode.insertBefore(k,b);e.endIndexInNode<b.length&&(h=l.createTextNode(b.data.substring(e.endIndexInNode)),b.parentNode.insertBefore(h,b));b.parentNode.removeChild(b);this.reverts.push(function(){c===k.previousSibling&&c.parentNode.removeChild(c);h===k.nextSibling&&h.parentNode.removeChild(h);k.parentNode.replaceChild(b,
k)});return k}c=l.createTextNode(b.data.substring(0,d.indexInNode));h=l.createTextNode(g.data.substring(e.endIndexInNode));var m=this.getPortionReplacementNode(d,a);d=[];for(var n=0,p=f.length;n<p;++n){var r=f[n],t=this.getPortionReplacementNode(r,a);r.node.parentNode.replaceChild(t,r.node);this.reverts.push(function(a,b){return function(){b.parentNode.replaceChild(a.node,b)}}(r,t));d.push(t)}var s=this.getPortionReplacementNode(e,a);b.parentNode.insertBefore(c,b);b.parentNode.insertBefore(m,b);b.parentNode.removeChild(b);
g.parentNode.insertBefore(s,g);g.parentNode.insertBefore(h,g);g.parentNode.removeChild(g);this.reverts.push(function(){c.parentNode.removeChild(c);m.parentNode.replaceChild(b,m);h.parentNode.removeChild(h);s.parentNode.replaceChild(g,s)});return s}};return p}();